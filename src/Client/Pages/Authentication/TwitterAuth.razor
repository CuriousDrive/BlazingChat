@page "/TwitterAuth"

@using Microsoft.AspNetCore.WebUtilities
@using BlazingChat.ViewModels
@inject NavigationManager _navigationManager
@inject ILocalStorageService _localStorageService

<h1>Please wait...</h1>
<h3> OAuth Verifier : @OAuthVerifier</h3>

@code{
    public string OAuthVerifier {get; set;}
    protected override async Task OnInitializedAsync()
    {
        if (QueryHelpers.ParseQuery(_navigationManager.Uri).TryGetValue("oauth_verifier", out var _oAuthVerifier))
        {
            OAuthVerifier = _oAuthVerifier;        
            
            //string token = await _facebookViewModel.GetFacebookJWTAsync(_requestToken);
            //await _localStorageService.SetItemAsync<string>("jwt_token", token);
            
            //_navigationManager.NavigateTo("/profile", true);
        }
    } 
}